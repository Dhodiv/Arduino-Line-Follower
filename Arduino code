// Arduino Line Follower Robot Code

int mr1 = 8;
int mr2 = 9;
int ml1 = 10;
int ml2 = 11;
int sr = 6;
int sl = 7;
int svr = 0;
int svl = 0;
int led = 13;
int enr = 3;
int enl = 5;

int cruiseSpeed = 120;
int turnSpeed = 240;
int turnDelay = 25;

void setup()
{
  pinMode(mr1, OUTPUT);
  pinMode(mr2, OUTPUT);
  pinMode(ml1, OUTPUT);
  pinMode(ml2, OUTPUT);
  pinMode(led, OUTPUT);
  pinMode(sr, INPUT);
  pinMode(sl, INPUT);
  
  delay(3000);
}

void loop()
{
  svr = digitalRead(sr);
  svl = digitalRead(sl);
  
  if(svl == LOW && svr == LOW)
  {
    forward();
  }

  if(svl == HIGH && svr == LOW)
  {
    left();
  }
 
  if(svl == LOW && svr == HIGH)
  { 
    right();
  }
  
  if(svl == HIGH && svr == HIGH)
  {
    stop();
  }
}

void forward()
{
  digitalWrite(mr1, HIGH);
  digitalWrite(mr2, LOW);
  digitalWrite(ml1, HIGH);
  digitalWrite(ml2, LOW);
  analogWrite(enr, cruiseSpeed);
  analogWrite(enl, cruiseSpeed);
} 

void backward()
{
  digitalWrite(mr1, LOW);
  digitalWrite(mr2, HIGH);
  digitalWrite(ml1, LOW);
  digitalWrite(ml2, HIGH);
  analogWrite(enr, cruiseSpeed);
  analogWrite(enl, cruiseSpeed);
}

void right()
{
  digitalWrite(mr1, LOW);
  digitalWrite(mr2, HIGH);
  digitalWrite(ml1, HIGH);
  digitalWrite(ml2, LOW);
  analogWrite(enr, turnSpeed);
  analogWrite(enl, turnSpeed);
  delay(turnDelay);
} 

void left()
{
  digitalWrite(mr1, HIGH);
  digitalWrite(mr2, LOW);
  digitalWrite(ml1, LOW);
  digitalWrite(ml2, HIGH);
  analogWrite(enr, turnSpeed);
  analogWrite(enl, turnSpeed);
  delay(turnDelay);
}  

void stop()
{
  analogWrite(enr, 0);
  analogWrite(enl, 0);
}
